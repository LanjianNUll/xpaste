# 需求梳理

## 目标
- 做一个 Windows 剪贴板应用，记录剪贴板历史（文字、图片等），可选择某条历史记录并粘贴。

## 功能需求
- 剪贴板历史：记录复制的历史记录（文字 + 图片）。
- 多格式支持：纯文本、图片、HTML（保留格式文本）、文件路径、颜色代码。
- 快速唤起：支持自定义全局热键（如 Alt+V），在鼠标指针处弹出窗口。
- 混合预览：
  - 图片显示缩略图，点击可查看原图。
  - 长文本自动截断，支持搜索关键词高亮。
  - 代码片段自动识别语言并语法高亮。
- 自动分类：系统自动将历史归类为"链接"、"图片"、"文本"、"文件"。

### 新增功能

#### 1. 点击历史记录直接插入剪贴板
- 点击历史列表item直接将内容写入系统剪贴板
- 移除"写入剪贴板"按钮，简化操作流程

#### 2. 历史记录按天分类
- 默认显示今天的记录
- 支持快速切换：今天、昨天、前天
- 支持自定义日期选择
- 使用标签页形式展示日期筛选

#### 3. 图片缩略图显示
- 列表中显示 60x60px 缩略图
- 替代"[图片]"文字显示
- 提升内容识别效率

#### 4. 跟随光标的快捷窗口
- Alt+V 全局快捷键唤起
- 窗口在光标附近显示（360x500px）
- 置顶、不显示任务栏、失焦自动隐藏
- 点击后自动关闭窗口

## 技术方案 / 推荐栈
- 框架：Tauri + Rust + Vue3
- 剪贴板监听：arboard (Rust)
- 全局快捷键：tauri-plugin-global-shortcut
- 本地数据库：sqlx + SQLite
- 窗口管理：Win32 API (via windows-rs)
- UI 组件：Element Plus 或 UnoCSS

## 任务点
- 需求细化：格式类型定义（HTML/文件/颜色）与分类规则
- 工程搭建：Tauri + Vue3 + Rust 基础工程
- 剪贴板监听：文本/图片/HTML/文件路径/颜色码采集
- 数据层：SQLite 表结构 + sqlx 模型 + 异步写入
- 历史列表与详情 UI：
  - 图片缩略图/原图查看
  - 文本截断与关键词高亮
  - 代码自动识别与语法高亮
- 自动分类逻辑：链接/文件路径/颜色码识别
- 快捷键与窗口：全局热键注册、鼠标位置弹窗、失焦隐藏
- 选择记录并粘贴：写回剪贴板 + 触发粘贴动作
- 设置：快捷键自定义、存储上限/清理策略
- 打包与系统权限（Windows）
